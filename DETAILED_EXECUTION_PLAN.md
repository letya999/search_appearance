# –ü–æ–¥—Ä–æ–±–Ω—ã–π –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–µ—Ä–≤–∏—Å–∞ Visual Dating Search (Decomposition & Checklists)

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –≤ –µ–¥–∏–Ω—ã–π –ø–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π.

---

## üü¢ –≠—Ç–∞–ø 0: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (Week 1, Day 1)
**–¶–µ–ª—å:** –°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç –ø—Ä–æ–µ–∫—Ç–∞, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –ø–∏—Å–∞—Ç—å –∫–æ–¥ –º–æ–¥—É–ª—å–Ω–æ.

- [x] **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞**
  - [x] –°–æ–∑–¥–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π / –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞.
  - [x] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (poetry / uv / venv).
  - [x] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∞–∑–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `fastapi`, `pydantic`, `numpy`, `openai` (–¥–ª—è API –∫–ª–∏–µ–Ω—Ç–æ–≤), `gradio`.
- [x] **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫**
  - [x] –°–æ–∑–¥–∞—Ç—å `mvp/schema` (–º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö).
  - [x] –°–æ–∑–¥–∞—Ç—å `mvp/core` (–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞, –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞).
  - [x] –°–æ–∑–¥–∞—Ç—å `mvp/annotator` (VLM –∫–ª–∏–µ–Ω—Ç).
  - [x] –°–æ–∑–¥–∞—Ç—å `mvp/storage` (—Ä–∞–±–æ—Ç–∞ —Å –ë–î/—Ñ–∞–π–ª–∞–º–∏).
  - [x] –°–æ–∑–¥–∞—Ç—å `mvp/api` (—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã).
  - [x] –°–æ–∑–¥–∞—Ç—å `tests/` (pytest).

---

## üü¢ –≠—Ç–∞–ø 1: –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –°—Ö–µ–º–∞ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ (Week 1, Days 2-3)
**–¶–µ–ª—å:** –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–∞–Ω–Ω—ã—Ö. –°–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ "–ø–æ–Ω–∏–º–∞—Ç—å" 20 –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –≤–Ω–µ—à–Ω–æ—Å—Ç–∏.

- [x] **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ Enums (`mvp/schema/attributes.py`)**
  - [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `BasicAttributes` (AgeGroup, Ethnicity, Height, BodyType, Gender).
  - [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `FaceAttributes` (FaceShape, EyeColor, EyeShape, Nose, Lips, Jawline).
  - [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `HairAttributes` (Color, Length, Texture).
  - [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `ExtraAttributes` (FacialHair, SkinTone, Glasses, Tattoos).
  - [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `VibeAttributes` (Style, Vibe).
- [x] **Pydantic –ú–æ–¥–µ–ª–∏ (`mvp/schema/models.py`)**
  - [x] –°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å `AttributeScore` (value: Enum, confidence: float).
  - [x] –°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å `PhotoProfile` (—Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ª–æ–≤–∞—Ä–∏ –∞—Ç—Ä–∏–±—É—Ç–æ–≤).
  - [x] –°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å `SearchQuery` (positive_ids, negative_ids).

---

## üü¢ –≠—Ç–∞–ø 2: –Ø–¥—Ä–æ Fuzzy Logic (Week 1, Days 4-5)
**–¶–µ–ª—å:** –ù–∞—É—á–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –ø–æ–Ω–∏–º–∞—Ç—å, —á—Ç–æ "Blonde" –±–ª–∏–∑–∫–æ –∫ "Light Brown", –Ω–æ –¥–∞–ª–µ–∫–æ –æ—Ç "Black".

- [x] **–ú–∞—Ç—Ä–∏—Ü—ã –†–∞—Å—Å—Ç–æ—è–Ω–∏–π (`mvp/core/distance_matrices.py`)**
  - [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `MatrixRegistry` –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞.
  - [x] **AgeGroup**: –õ–∏–Ω–µ–π–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞ (—Å–æ—Å–µ–¥–Ω–∏–µ –≥—Ä—É–ø–ø—ã –±–ª–∏–∂–µ).
  - [x] **Height**: –õ–∏–Ω–µ–π–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞.
  - [x] **HairColor**: –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è –º–∞—Ç—Ä–∏—Ü–∞ (Black ‚Üî Brown > Black ‚Üî Blonde).
  - [x] **Ethnicity**: –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è –º–∞—Ç—Ä–∏—Ü–∞ –±–ª–∏–∑–æ—Å—Ç–∏ —Ñ–µ–Ω–æ—Ç–∏–ø–æ–≤.
  - [x] **BodyType**: –õ–∏–Ω–µ–π–Ω–æ-—Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è –º–∞—Ç—Ä–∏—Ü–∞.
  - [x] **Identity Matrix**: –î–µ—Ñ–æ–ª—Ç–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞ (0 –∏–ª–∏ 1) –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π.
- [x] **–ê–ª–≥–æ—Ä–∏—Ç–º—ã –°—Ö–æ–¥—Å—Ç–≤–∞ (`mvp/core/similarity.py`)**
  - [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `calculate_single_sim(val1, conf1, val2, conf2, matrix)`.
  - [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `calculate_multi_sim` (Jaccard fuzzy logic) –¥–ª—è –∞—Ç—Ä–∏–±—É—Ç–æ–≤ —Ç–∏–ø–∞ —Å–ø–∏—Å–∫–æ–≤ (–µ—Å–ª–∏ –±—É–¥—É—Ç).
- [x] **Unit Tests**
  - [x] –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç: `distance(Black, DarkBrown) < distance(Black, Blonde)`.

---

## üü° –≠—Ç–∞–ø 3: VLM –ê–Ω–Ω–æ—Ç–∞—Ç–æ—Ä (Week 2)
**–¶–µ–ª—å:** –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å AI, –∫–æ—Ç–æ—Ä—ã–π —Å–º–æ—Ç—Ä–∏—Ç –Ω–∞ —Ñ–æ—Ç–æ –∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç JSON.

- [ ] **–ö–ª–∏–µ–Ω—Ç VLM (`mvp/annotator/client.py`)**
  - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–ª–∏–µ–Ω—Ç (OpenAI SDK —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π) –¥–ª—è OpenRouter / RunPod.
  - [ ] –í—ã–±—Ä–∞—Ç—å –º–æ–¥–µ–ª—å: `Qwen2.5-VL-7B-Instruct` –∏–ª–∏ `Llava-NeXT`.
- [ ] **Prompt Engineering (`mvp/annotator/prompts.py`)**
  - [ ] –ù–∞–ø–∏—Å–∞—Ç—å System Prompt c –∂–µ—Å—Ç–∫–æ–π —Å—Ö–µ–º–æ–π JSON.
  - [ ] –í–∫–ª—é—á–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã (Few-Shot) –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∫–µ–π—Å–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "—à–∞—Ç–µ–Ω" vs "–±—Ä—é–Ω–µ—Ç").
- [ ] **–ü–∞—Ä—Å–∏–Ω–≥ –∏ –í–∞–ª–∏–¥–∞—Ü–∏—è**
  - [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –æ—á–∏—Å—Ç–∫–∏ JSON –æ—Ç markdown-–æ–±–µ—Ä—Ç–æ–∫.
  - [ ] –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–≤–µ—Ç —á–µ—Ä–µ–∑ Pydantic –º–æ–¥–µ–ª—å `PhotoProfile`.
  - [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Retry-–ª–æ–≥–∏–∫—É (–ø–æ–≤—Ç–æ—Ä –∑–∞–ø—Ä–æ—Å–∞ –ø—Ä–∏ –±–∏—Ç–æ–º JSON).
- [ ] **–°–∫—Ä–∏–ø—Ç –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ (`batch_process.py`)**
  - [ ] –ù–∞–ø–∏—Å–∞—Ç—å —Å–∫—Ä–∏–ø—Ç, —á–∏—Ç–∞—é—â–∏–π –ø–∞–ø–∫—É —Å —Ñ–æ—Ç–æ.
  - [ ] –°–æ—Ö—Ä–∞–Ω—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ `result_metadata.json` –∏–ª–∏ SQLite/Postgres.

---

## üü° –≠—Ç–∞–ø 4: –ü–æ–∏—Å–∫–æ–≤—ã–π –î–≤–∏–∂–æ–∫ (Week 3)
**–¶–µ–ª—å:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É "–ò—â—É –ø–æ—Ö–æ–∂–∏—Ö –Ω–∞ –≠–¢–ò–•, –Ω–æ –Ω–µ –Ω–∞ –¢–ï–•".

- [ ] **–ê–≥—Ä–µ–≥–∞—Ü–∏—è –ü—Ä–æ—Ñ–∏–ª—è (`mvp/search/aggregator.py`)**
  - [ ] –õ–æ–≥–∏–∫–∞ `build_target_profile(positive_list, negative_list)`.
  - [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤–∑–≤–µ—à–µ–Ω–Ω–æ–µ —É—Å—Ä–µ–¥–Ω–µ–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ —Å —É—á–µ—Ç–æ–º confidence.
  - [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤—ã—á–∏—Ç–∞–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–æ–≤ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–æ–≤ (–∏–ª–∏ —à—Ç—Ä–∞—Ñ—ã).
- [ ] **–†–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ (`mvp/search/ranker.py`)**
  - [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `score_candidate(target, candidate)`.
  - [ ] –í–Ω–µ–¥—Ä–∏—Ç—å –≤–µ—Å–∞ –≤–∞–∂–Ω–æ—Å—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `Face` –≤–∞–∂–Ω–µ–µ `Glasses`).
  - [ ] –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã (Hard Filters): –ü–æ–ª, –í–æ–∑—Ä–∞—Å—Ç (—Å –∑–∞–ø–∞—Å–æ–º).
- [ ] **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**
  - [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏ –Ω–∞ —Å–ø–∏—Å–∫–µ –∏–∑ 10,000 –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ (in-memory).

---

## üî¥ –≠—Ç–∞–ø 5: API –∏ UI –î–µ–º–æ (Week 4)
**–¶–µ–ª—å:** –°–æ–±—Ä–∞—Ç—å –≤—Å—ë –≤ —Ä–∞–±–æ—Ç–∞—é—â–µ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.

- [ ] **Backend (FastAPI)**
  - [ ] `POST /index-photo`: –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Ñ–æ—Ç–æ -> VLM -> –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –ë–î.
  - [ ] `POST /search`: –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–ø–∏—Å–∫–∏ ID -> –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ ID —Å score.
- [ ] **Frontend (Gradio)**
  - [ ] –í–∫–ª–∞–¥–∫–∞ **"Data Loader"**: –ó–∞–≥—Ä—É–∑–∫–∞ –ø–∞–ø–∫–∏ —Ñ–æ—Ç–æ, –∑–∞–ø—É—Å–∫ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏, –ø—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä.
  - [ ] –í–∫–ª–∞–¥–∫–∞ **"Visual Search"**:
    - [ ] Dropzone –¥–ª—è 5 "Positive" —Ñ–æ—Ç–æ.
    - [ ] Dropzone –¥–ª—è 5 "Negative" —Ñ–æ—Ç–æ.
    - [ ] –°–ª–∞–π–¥–µ—Ä—ã –≤–µ—Å–æ–≤ (Importance Sliders).
    - [ ] –ì–∞–ª–µ—Ä–µ—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º Score –∏ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ–º ("Match: Eyes, Hair").
- [ ] **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**
  - [ ] –ü–æ–¥–∫–ª—é—á–∏—Ç—å UI –∫ —Ä–µ–∞–ª—å–Ω–æ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–µ.

---

## üî¥ –≠—Ç–∞–ø 6: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¢—é–Ω–∏–Ω–≥ (Week 5)
**–¶–µ–ª—å:** –î–æ–≤–µ—Å—Ç–∏ –∫–∞—á–µ—Å—Ç–≤–æ –ø–æ–∏—Å–∫–∞ –¥–æ –∞–¥–µ–∫–≤–∞—Ç–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è.

- [ ] **–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã**
  - [ ] –¢–µ—Å—Ç "–≠—Ç–Ω–∏—á–Ω–æ—Å—Ç—å": –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–π —Ç–∏–ø–∞–∂ -> –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—ã–¥–∞—á—É.
  - [ ] –¢–µ—Å—Ç "–ù–µ–≥–∞—Ç–∏–≤": –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ç–∏–ø–∞–∂ –≤ "–ù–µ –Ω—Ä–∞–≤–∏—Ç—Å—è" -> –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –æ–Ω –∏—Å—á–µ–∑.
- [ ] **–¢—é–Ω–∏–Ω–≥ –º–∞—Ç—Ä–∏—Ü**
  - [ ] –ü–æ–¥–∫—Ä—É—Ç–∏—Ç—å –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –≤ –º–∞—Ç—Ä–∏—Ü–∞—Ö —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–π, –µ—Å–ª–∏ "Blonde" —Å–ª–∏—à–∫–æ–º –¥–∞–ª–µ–∫–æ –æ—Ç "Dark Blonde".
- [ ] **–î–µ–ø–ª–æ–π–º–µ–Ω—Ç (MVP)**
  - [ ] Dockerfile.
  - [ ] –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É `README.md`.

---

## –ß–µ–∫–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ —Ä–µ–ª–∏–∑—É
- [ ] –í—Å–µ 20 –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è VLM.
- [ ] –ü–æ–∏—Å–∫ –æ—Ç—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –±—ã—Å—Ç—Ä–µ–µ 1-2 —Å–µ–∫—É–Ω–¥.
- [ ] –ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã —Ä–µ–∞–ª—å–Ω–æ –≤–ª–∏—è—é—Ç –Ω–∞ –≤—ã–¥–∞—á—É.
- [ ] –ö–æ–¥ –ø–æ–∫—Ä—ã—Ç —Ç–µ—Å—Ç–∞–º–∏ (–º–∏–Ω–∏–º—É–º Core Logic).
